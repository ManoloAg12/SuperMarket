{% extends "base.html" %}

{% block content %}
<div class="container">
    <section class="categories-section">
        <div class="categories-header">
            <h1>Nuestras Categorías</h1>
            <p>Explora nuestra amplia selección de productos</p>
        </div>
         <!-- Sección de Ofertas -->
    {% if productos_oferta %}
    <section class="offers-section mb-5">
        <div class="section-header">
            <h2><i class="fas fa-tag text-danger me-2"></i>Ofertas Especiales</h2>
            <p>Productos con más de 150 unidades en stock - ¡15% de descuento!</p>
        </div>
        
        <div class="offers-grid">
            {% for producto in productos_oferta %}
            <div class="offer-card">
                <div class="offer-badge">15% OFF</div>
                <img src="{{ url_for('static', filename='images/' + producto.imagen) if producto.imagen else 'https://via.placeholder.com/300x180?text=Producto' }}" 
                     class="offer-img" 
                     alt="{{ producto.nombre }}">
                <div class="offer-body">
                    <h5>{{ producto.nombre }}</h5>
                    <div class="price-container">
                        <span class="original-price">${{ "%.2f"|format(producto.precio) }}</span>
                        <span class="offer-price">${{ "%.2f"|format(producto.precio_oferta) }}</span>
                    </div>
                    <span class="stock-badge">
                        <i class="fas fa-box-open me-1"></i>{{ producto.stock }} unidades
                    </span>
                    <form method="POST" action="{{ url_for('agregar_al_carrito', producto_id=producto.id) }}">
                        <input type="hidden" name="cantidad" value="1">
                        <button type="submit" class="btn btn-sm btn-danger w-100 mt-2">
                            <i class="fas fa-cart-plus me-1"></i> Agregar
                        </button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}
        
        <div class="category-grid">
            {% for categoria in categorias %}
            <div class="category-card">
                <div class="category-body">
                    <div class="category-icon">
                        {% if categoria.nombre.lower() == 'abarrotes' %}
                        <i class="fas fa-utensils"></i>
                        {% elif categoria.nombre.lower() == 'lácteos' %}
                        <i class="fas fa-cheese"></i>
                        {% elif categoria.nombre.lower() == 'bebidas' %}
                        <i class="fas fa-wine-bottle"></i>
                        {% elif categoria.nombre.lower() == 'limpieza' %}
                        <i class="fas fa-broom"></i>
                        {% elif categoria.nombre.lower() == 'cuidado personal' %}
                        <i class="fas fa-soap"></i>
                        {% else %}
                        <i class="fas fa-tag"></i>
                        {% endif %}
                    </div>
                    <h3 class="category-title">{{ categoria.nombre }}</h3>
                    <a href="{{ url_for('productos', categoria_id=categoria.id) }}" class="btn btn-category">
                        Ver Productos <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}